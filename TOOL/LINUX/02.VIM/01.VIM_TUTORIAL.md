# VIM TUTORIAL
[TOC]

## 教材
```
$ vimtutor
```
#### コーディングを3倍速くする！ Vim入門
https://vimeo.com/groups/179422/videos/22709519  
7:22から実演  

#### 今更聞けないvimの話
https://youtu.be/jJaQz7oZ8xc  
https://youtu.be/lB7MORIP9iI  

#### vim入門
https://dotinstall.com/lessons/basic_vim  

#### vim をおすすめする理由
https://qiita.com/mimimi-no-sesese/items/602973f644cfa56dccfb  

#### 研修で非常に有効だった内容
https://qiita.com/nyantera/items/4bf29ca6f11bc797a9cb 



## 練習

VIM ADVENTURE  
https://qiita.com/arufa/items/1cac121ea73cebc421dc  
https://vim-adventures.com/  

vimの練習に最適！直感的に練習できるサイト作りました  
https://command-lab.com/vim-practice/    



## コマンドリスト
#### モードの切り替え
i 　編集モード  
ESC 　ノーマルモード  

#### 保存と終了　(ノーマルモード)  
保存　:w  
保存して終了　:wq  
保存せず終了　:q!  

#### 取り消し・やり直し・繰り返し　(ノーマルモード)  
U　アンドゥ（取り消し）  
Ctrl + r　アンドゥで戻した操作を、元に戻す。  
.　直前の操作の繰り返し  

CTL+L 画面のリフレッシュ

#### 削除 (ノーマルモード)  
D　行末まで削除  
行数 dd　カーソル位置から指定した行分カット  
dw　 カーソル位置から空白を含む単語の末尾まで削除   
de  カーソル位置から空白を含まない単語の末尾まで削除   
d0  行先頭からカーソル位置まで削除   
dG  カーソル行からファイル末尾まで削除   
dd  1行削除切り取り（カット）  
cw  カーソル位置から単語の終わりまで削除して挿入モードに入る  

#### コピーとペースト　(ノーマルモード)  
y0　行頭からカーソルの直前まで のコピー  
y$	カーソルの位置から行末まで のコピー  
yy	カーソル行をヤンク  
p	ヤンクした文字列をカーソル位置後にペースト  
3yy	カーソル行から3行ヤンク  

#### 複数行選択　(ノーマルモード)  
V (shift + v)　→　領域選択  
ブロック選択  
CTL + V　→　領域選択  
yで選択個所をヤンク, dで選択個所を削除  

#### 移動　(ノーマルモード)  
$	行の末尾へ  
0	行の先頭へ  
ctrl + u	半画面分 上へ  
ctrl + d	半画面分 下へ  
ctrl + b	一画面分 上へ  
ctrl + f	一画面分 下へ  
`.　最後の編集位置に戻る  
'.　 最後の編集位置の行頭にジャンプ  
gg	そのファイルの先頭へ  
G	そのファイルの末尾へ  
{	段落毎に上へ  
}	段落毎に下へ  

#### 検索　(ノーマルモード)  
/	後ろにむかって検索  
?	前にむかって検索  
n	順方向へ検索する  
N	逆方向へ検索する検索  
% 対応するカッコに移動  

noh ハイライト表示解除

#### 置換　(ノーマルモード)  
一括置換(確認)  
:%s/検索文字列/置換文字列/gc  
一括置換(確認しない)  
:%s/検索文字列/置換文字列/g  

#### 一行一文字検索 　(ノーマルモード)  
f	その行の順方向に一文字検索  
F	その行の逆方向に一文字検索  
t	その行の順方向に一文字検索(カーソルは文字の手前)  
T	その行の逆方向に一文字検索(カーソルは文字の手前)  

#### コマンドの実行　(ノーマルモード)  
:!コマンド  

コマンドの再実行　(ノーマルモード)  
q:でコマンド履歴を開く　→　実行したいコマンドに移動　→　Enterで選択  
(iでコマンド履歴の編集が可能）  

#### コマンド結果の挿入　(ノーマルモード)  
V（shift+v）→ :!コマンド  

#### マクロ　(ノーマルモード)  
qa  マクロ「a」を記録開始  
q  マクロの記録を停止  
@a  マクロ「a」を実行  
@@  最後に実行したマクロを再実行  

#### バッファ操作　(ノーマルモード)  
:e 開きたいファイル	別ファイルを開く   
:ls　→　:b N	N番目のバッファに移動  
:b ファイル名	ファイル名のバッファに移動

:bd バッファ番号 バッファを閉じる  

#### ウィンドウを分割する　(ノーマルモード)  
上下に分割	:split  
左右に分割	:vsplit  
左に移動	C-w h	sh  
下に移動	C-w j	sj  
上に移動	C-w k	sk  
右に移動	C-w l	sl  
次に移動	C-w w	sw  
分割したウィンドウそのものを移動する  
左に移動	C-w H	sH  
下に移動	C-w J	sJ  
上に移動	C-w K	sK  
右に移動	C-w L	sL  
回転	C-w r	sr  

#### 複数ウインドウ操作　(ノーマルモード)  
:vnew	別ウィンドウを開く  
CTL+w h	左のウィンドウへ  
CTL＋w l 	右のウィンドウへ  
:q	現在のウィンドウを閉じる  
C-w >		幅を増やす  
C-w <		幅を減らす  
C-w =		大きさをそろえる  

#### タブページ　(ノーマルモード)  
新規タブ	:tabnew  
次のタブに切替	gt  
前のタブに切替	gT  



## 設定

ホームの下にある `~/.vim` ディレクトリと `~/.vimrc` ファイルを書き換えると設定が変更できる。

**作業の前に, 必ずバックアップを取る**

```bash
cp -ar ~/.vim  vim_BAK_$(date "+%Y-%m-%d_%H")
```



**主な~/.vimrcの変更項目**
　`jk`を挿入モード解除（`ESC`の代わり）にする

```vim
inoremap jk <ESC>
```



## 参考

### Linuxコマンドプロンプトをviモードにする

Linuxコマンドプロンプト

```bash
$
```

でのキー操作をviと同じにすると，コマンドを打ち込むのが楽になる。

#### 設定方法

`$HOME/.bashrc`というファイルに，

```
set -o vi
```

を追加する。また，

`$HOME/.inputrc`というファイルに

```
"jk": vi-movement-mode
```

を追加する。

#### 使用例

`jk`連打: `ESC`と同じ。viのノーマルモードと同じ状態になる

`i`: viの挿入モードと同じ状態になる。

`0`: カーソル位置を一番左に戻す

`$`: カーソル位置を一番右に動かす

`D`: カーソルより右側にある文字をすべて消去する

`dW`: カーソルより右側にある単語の終わりまでを消去する（カーソル位置から見て右側の一番最初に現れるスペースまで消去）

`x`(小文字のx): `Del`キーと同じ

`X`(大文字のx): `Backspace`キーと同じ

`j`: 使用したコマンド履歴においてひとつ前のコマンド

`k`: 使用したコマンド履歴において一つ後のコマンド

`h`: 左にカーソル移動

`l`: 右にカーソル移動 

  

## 参考になるサイト

もうこれでVIM学習は最後にしよう！ VIMチュートリアルと入門
https://qiita.com/baby-degu/items/9b6b275b72c37a02001c

